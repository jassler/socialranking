<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate power relations — powerRelationGenerator • socialranking</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate power relations — powerRelationGenerator"><meta name="description" content="Based on a list of coalitions, create a generator function that returns a new PowerRelation object with every call.
NULL is returned once every possible power relation has been generated.
Alternatively, use generateRandomPowerRelation() to create random power relations."><meta property="og:description" content="Based on a list of coalitions, create a generator function that returns a new PowerRelation object with every call.
NULL is returned once every possible power relation has been generated.
Alternatively, use generateRandomPowerRelation() to create random power relations."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">socialranking</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/socialranking.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/socialranking_pdf.html">`socialranking`: A package for evaluating ordinal power relations in cooperative game theory</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jassler/socialranking/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate power relations</h1>
      <small class="dont-index">Source: <a href="https://github.com/jassler/socialranking/blob/main/R/generator.R" class="external-link"><code>R/generator.R</code></a></small>
      <div class="d-none name"><code>powerRelationGenerator.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Based on a list of coalitions, create a generator function that returns a new <code><a href="PowerRelation.html">PowerRelation</a></code> object with every call.
<code>NULL</code> is returned once every possible power relation has been generated.</p>
<p>Alternatively, use <code>generateRandomPowerRelation()</code> to create random power relations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">powerRelationGenerator</span><span class="op">(</span><span class="va">coalitions</span>, startWithLinearOrder <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">generateNextPartition</span><span class="op">(</span><span class="va">gen</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">generateRandomPowerRelation</span><span class="op">(</span><span class="va">coalitions</span>, linearOrder <span class="op">=</span> <span class="cn">FALSE</span>, monotonic <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-coalitions">coalitions<a class="anchor" aria-label="anchor" href="#arg-coalitions"></a></dt>
<dd><p>List of coalition vectors. An empty coalition can be set with <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>.</p></dd>


<dt id="arg-startwithlinearorder">startWithLinearOrder<a class="anchor" aria-label="anchor" href="#arg-startwithlinearorder"></a></dt>
<dd><p>If set to <code>TRUE</code>, the first <code><a href="PowerRelation.html">PowerRelation</a></code> object generated will be a linear order in the order of the list of <code>coalitions</code> they are given.
If set to <code>FALSE</code>, the first <code><a href="PowerRelation.html">PowerRelation</a></code> object generated will have a single equivalence class containing all coalitions, as in, every coalition is equally powerful.</p></dd>


<dt id="arg-gen">gen<a class="anchor" aria-label="anchor" href="#arg-gen"></a></dt>
<dd><p>A generator object returned by <code>powerRelationGenerator()</code>.</p></dd>


<dt id="arg-linearorder">linearOrder<a class="anchor" aria-label="anchor" href="#arg-linearorder"></a></dt>
<dd><p>logical, if TRUE, only linear orders are generated.</p></dd>


<dt id="arg-monotonic">monotonic<a class="anchor" aria-label="anchor" href="#arg-monotonic"></a></dt>
<dd><p>logical, if TRUE, only monotonic power relations are created (see <code><a href="makePowerRelationMonotonic.html">makePowerRelationMonotonic()</a></code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A generator function.
Every time this generator function is called, a different <code><a href="PowerRelation.html">PowerRelation</a></code> object is returned.
Once all possible power relations have been generated, the generator function returns <code>NULL</code>.</p>
<p>A generator function.
If the generator is already down to its last partition, it will throw an error.</p>
<p>Use <code>generateNextPartition(gen)</code> to skip to the next partition of the generator.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Using the <code>partitions</code> library, <code><a href="https://rdrr.io/pkg/partitions/man/parts.html" class="external-link">partitions::compositions()</a></code> is used to create all possible partitions over the set of coalitions.
For every partition, <code><a href="https://rdrr.io/pkg/partitions/man/parts.html" class="external-link">partitions::multinomial()</a></code> is used to create all permutations over the order of the coalitions.</p>
<p>Note that the number of power relations (or total preorders) grows incredibly fast.</p>
<p>The Stirling number of second kind \(S(n,k)\) gives us the number of \(k\) partitions over \(n\) elements.</p>
<p>$$S(n,k) = \frac{1}{k!}\sum_{j=0}^{k} (-1)^j \binom{k}{j}(k-j)^n$$</p>
<p>For example, with 4 coalitions (n = 4) there are 6 ways to split it into k = 3 partitions.
The sum of all partitions of any size is also known as the Bell number (\(B_n = \sum_{k=0}^n S(n,k)\), see also <code>numbers::bell()</code>).</p>
<p>Regarding total preorders \(\mathcal{T}(X)\) over a set \(X\), the Stirling number of second kind can be used to determine the number of all possible total preorders \(|\mathcal{T}(X)|\).</p>
<p>$$|\mathcal{T}(X)| = \sum_{k=0}^{|X|} k! * S(|X|, k)$$</p>
<p>In literature, it is referred to as the ordered Bell number or Fubini number.</p>
<p>In the context of social rankings we may consider total preorders over the set of coalitions \(2^N\) for a given set of elements or players \(N\).
Here, the number of coalitions doubles with every new element.
The number of preorders then are:</p><table class="table table"><tr><td># of elements</td><td># of coalitions</td><td># of total preorders</td><td>1ms / computation</td></tr><tr><td>0</td><td>1</td><td>1</td><td>1ms</td></tr><tr><td>1</td><td>2</td><td>3</td><td>3ms</td></tr><tr><td>2</td><td>4</td><td>75</td><td>75ms</td></tr><tr><td>3</td><td>7 (w/o empty set)</td><td>47,293</td><td>47 seconds</td></tr><tr><td>3</td><td>8</td><td>545,835</td><td>9 minutes</td></tr><tr><td>4</td><td>15 (w/o empty set)</td><td>230,283,190,977,853</td><td>7,302 years</td></tr><tr><td>4</td><td>16</td><td>5,315,654,681,981,355</td><td>168,558 years</td></tr></table></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Due to its implementation, <code>randomPowerRelation()</code> does not create weak orders uniformly.
I.e., it is much less likely to generate linear orders even though they have the proportionally highest representation
in the set of all weak orders.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">coalitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="createPowerset.html">createPowerset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'a'</span>,<span class="st">'b'</span><span class="op">)</span>, includeEmptySet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># list(c('a','b'), 'a', 'b')</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gen</span> <span class="op">&lt;-</span> <span class="fu">powerRelationGenerator</span><span class="op">(</span><span class="va">coalitions</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">while</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">pr</span> <span class="op">&lt;-</span> <span class="fu">gen</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pr</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (ab ~ a ~ b)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (ab ~ a) &gt; b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (ab ~ b) &gt; a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (a ~ b) &gt; ab</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ab &gt; (a ~ b)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a &gt; (ab ~ b)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> b &gt; (ab ~ a)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ab &gt; a &gt; b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ab &gt; b &gt; a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a &gt; ab &gt; b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> b &gt; ab &gt; a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a &gt; b &gt; ab</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> b &gt; a &gt; ab</span>
<span class="r-in"><span><span class="co"># (ab ~ a ~ b)</span></span></span>
<span class="r-in"><span><span class="co"># (ab ~ a) &gt; b</span></span></span>
<span class="r-in"><span><span class="co"># (ab ~ b) &gt; a</span></span></span>
<span class="r-in"><span><span class="co"># (a ~ b) &gt; ab</span></span></span>
<span class="r-in"><span><span class="co"># ab &gt; (a ~ b)</span></span></span>
<span class="r-in"><span><span class="co"># a &gt; (ab ~ b)</span></span></span>
<span class="r-in"><span><span class="co"># b &gt; (ab ~ a)</span></span></span>
<span class="r-in"><span><span class="co"># ab &gt; a &gt; b</span></span></span>
<span class="r-in"><span><span class="co"># ab &gt; b &gt; a</span></span></span>
<span class="r-in"><span><span class="co"># a &gt; ab &gt; b</span></span></span>
<span class="r-in"><span><span class="co"># b &gt; ab &gt; a</span></span></span>
<span class="r-in"><span><span class="co"># a &gt; b &gt; ab</span></span></span>
<span class="r-in"><span><span class="co"># b &gt; a &gt; ab</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># from now on, gen() always returns NULL</span></span></span>
<span class="r-in"><span><span class="fu">gen</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span><span class="co"># NULL</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use generateNextPartition() to skip certain partitions</span></span></span>
<span class="r-in"><span><span class="va">gen</span> <span class="op">&lt;-</span> <span class="fu">powerRelationGenerator</span><span class="op">(</span><span class="va">coalitions</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gen</span> <span class="op">&lt;-</span> <span class="fu">generateNextPartition</span><span class="op">(</span><span class="va">gen</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gen</span> <span class="op">&lt;-</span> <span class="fu">generateNextPartition</span><span class="op">(</span><span class="va">gen</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">gen</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ab &gt; (a ~ b)</span>
<span class="r-in"><span><span class="co"># ab &gt; (a ~ b)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gen</span> <span class="op">&lt;-</span> <span class="fu">generateNextPartition</span><span class="op">(</span><span class="va">gen</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">gen</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ab &gt; a &gt; b</span>
<span class="r-in"><span><span class="co"># ab &gt; a &gt; b</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">coalitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="createPowerset.html">createPowerset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'a'</span>,<span class="st">'b'</span><span class="op">)</span>, includeEmptySet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># list(c('a','b'), 'a', 'b')</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gen</span> <span class="op">&lt;-</span> <span class="fu">powerRelationGenerator</span><span class="op">(</span><span class="va">coalitions</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">gen</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (ab ~ a ~ b)</span>
<span class="r-in"><span><span class="co"># (ab ~ a ~ b)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">gen</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (ab ~ a) &gt; b</span>
<span class="r-in"><span><span class="co"># (ab ~ b) &gt; a</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># skipping partition of size two, where the first partition has</span></span></span>
<span class="r-in"><span><span class="co"># 2 coalitions and the second partition has 1 coalition</span></span></span>
<span class="r-in"><span><span class="va">gen</span> <span class="op">&lt;-</span> <span class="fu">generateNextPartition</span><span class="op">(</span><span class="va">gen</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">gen</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ab &gt; (a ~ b)</span>
<span class="r-in"><span><span class="co"># ab &gt; (a ~ b)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># only remaining partition is one of size 3, wherein each</span></span></span>
<span class="r-in"><span><span class="co"># equivalence class is of size 1</span></span></span>
<span class="r-in"><span><span class="va">gen</span> <span class="op">&lt;-</span> <span class="fu">generateNextPartition</span><span class="op">(</span><span class="va">gen</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">gen</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ab &gt; a &gt; b</span>
<span class="r-in"><span><span class="co"># ab &gt; a &gt; b</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># went through all partitions, it will only generate NULL now</span></span></span>
<span class="r-in"><span><span class="va">gen</span> <span class="op">&lt;-</span> <span class="fu">generateNextPartition</span><span class="op">(</span><span class="va">gen</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="fu">gen</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create random power relation</span></span></span>
<span class="r-in"><span><span class="fu">generateRandomPowerRelation</span><span class="op">(</span><span class="va">coalitions</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> b &gt; ab &gt; a</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># make sure it's monotonic, i.e., {1} &gt; {1,2} cannot exist</span></span></span>
<span class="r-in"><span><span class="co"># because {1} is a subset of {1,2}</span></span></span>
<span class="r-in"><span><span class="fu">generateRandomPowerRelation</span><span class="op">(</span><span class="va">coalitions</span>, monotonic <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ab &gt; b &gt; a</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Felix Fritz, Jochen Staudacher, Moretti Stefano.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

